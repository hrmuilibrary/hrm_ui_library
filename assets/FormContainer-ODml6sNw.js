import{j as de}from"./jsx-runtime-CO_4fShW.js";import{R as F,r as Ge}from"./iframe-DQqQBVxO.js";import{c as Ot}from"./index-BjDT6sgC.js";import{F as Rt}from"./types-DyQXMykX.js";import{B as Mt}from"./Button-CBwOmmgy.js";var me=e=>e.type==="checkbox",ae=e=>e instanceof Date,q=e=>e==null;const ot=e=>typeof e=="object";var R=e=>!q(e)&&!Array.isArray(e)&&ot(e)&&!ae(e),ut=e=>R(e)&&e.target?me(e.target)?e.target.checked:e.target.value:e,Ut=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,dt=(e,s)=>e.has(Ut(s)),Lt=e=>{const s=e.constructor&&e.constructor.prototype;return R(s)&&s.hasOwnProperty("isPrototypeOf")},Ce=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function N(e){let s;const t=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(!(Ce&&(e instanceof Blob||i))&&(t||R(e)))if(s=t?[]:Object.create(Object.getPrototypeOf(e)),!t&&!Lt(e))s=e;else for(const n in e)e.hasOwnProperty(n)&&(s[n]=N(e[n]));else return e;return s}var Ae=e=>/^\w*$/.test(e),O=e=>e===void 0,Oe=e=>Array.isArray(e)?e.filter(Boolean):[],Re=e=>Oe(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,s,t)=>{if(!s||!R(e))return t;const i=(Ae(s)?[s]:Re(s)).reduce((n,l)=>q(n)?n:n[l],e);return O(i)||i===e?O(e[s])?t:e[s]:i},K=e=>typeof e=="boolean",D=(e,s,t)=>{let i=-1;const n=Ae(s)?[s]:Re(s),l=n.length,u=l-1;for(;++i<l;){const d=n[i];let V=t;if(i!==u){const _=e[d];V=R(_)||Array.isArray(_)?_:isNaN(+n[i+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;e[d]=V,e=e[d]}};const Ve={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Y={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},te={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ct=F.createContext(null);ct.displayName="HookFormContext";const Me=()=>F.useContext(ct);var ft=(e,s,t,i=!0)=>{const n={defaultValues:s._defaultValues};for(const l in e)Object.defineProperty(n,l,{get:()=>{const u=l;return s._proxyFormState[u]!==Y.all&&(s._proxyFormState[u]=!i||Y.all),t&&(t[u]=!0),e[u]}});return n};const Ue=typeof window<"u"?F.useLayoutEffect:F.useEffect;function Nt(e){const s=Me(),{control:t=s.control,disabled:i,name:n,exact:l}=e||{},[u,d]=F.useState(t._formState),V=F.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Ue(()=>t._subscribe({name:n,formState:V.current,exact:l,callback:_=>{!i&&d({...t._formState,..._})}}),[n,i,l]),F.useEffect(()=>{V.current.isValid&&t._setValid(!0)},[t]),F.useMemo(()=>ft(u,t,V.current,!1),[u,t])}var Z=e=>typeof e=="string",yt=(e,s,t,i,n)=>Z(e)?(i&&s.watch.add(e),y(t,e,n)):Array.isArray(e)?e.map(l=>(i&&s.watch.add(l),y(t,l))):(i&&(s.watchAll=!0),t),Te=e=>q(e)||!ot(e);function re(e,s,t=new WeakSet){if(Te(e)||Te(s))return e===s;if(ae(e)&&ae(s))return e.getTime()===s.getTime();const i=Object.keys(e),n=Object.keys(s);if(i.length!==n.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const l of i){const u=e[l];if(!n.includes(l))return!1;if(l!=="ref"){const d=s[l];if(ae(u)&&ae(d)||R(u)&&R(d)||Array.isArray(u)&&Array.isArray(d)?!re(u,d,t):u!==d)return!1}}return!0}function Bt(e){const s=Me(),{control:t=s.control,name:i,defaultValue:n,disabled:l,exact:u,compute:d}=e||{},V=F.useRef(n),_=F.useRef(d),h=F.useRef(void 0);_.current=d;const x=F.useMemo(()=>t._getWatch(i,V.current),[t,i]),[b,W]=F.useState(_.current?_.current(x):x);return Ue(()=>t._subscribe({name:i,formState:{values:!0},exact:u,callback:I=>{if(!l){const E=yt(i,t._names,I.values||t._formValues,!1,V.current);if(_.current){const M=_.current(E);re(M,h.current)||(W(M),h.current=M)}else W(E)}}}),[t,l,i,u]),F.useEffect(()=>t._removeUnmounted()),b}function Pt(e){const s=Me(),{name:t,disabled:i,control:n=s.control,shouldUnregister:l,defaultValue:u}=e,d=dt(n._names.array,t),V=F.useMemo(()=>y(n._formValues,t,y(n._defaultValues,t,u)),[n,t,u]),_=Bt({control:n,name:t,defaultValue:V,exact:!0}),h=Nt({control:n,name:t,exact:!0}),x=F.useRef(e),b=F.useRef(n.register(t,{...e.rules,value:_,...K(e.disabled)?{disabled:e.disabled}:{}}));x.current=e;const W=F.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(h.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(h.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(h.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(h.validatingFields,t)},error:{enumerable:!0,get:()=>y(h.errors,t)}}),[h,t]),I=F.useCallback(v=>b.current.onChange({target:{value:ut(v),name:t},type:Ve.CHANGE}),[t]),E=F.useCallback(()=>b.current.onBlur({target:{value:y(n._formValues,t),name:t},type:Ve.BLUR}),[t,n._formValues]),M=F.useCallback(v=>{const B=y(n._fields,t);B&&v&&(B._f.ref={focus:()=>v.focus&&v.focus(),select:()=>v.select&&v.select(),setCustomValidity:L=>v.setCustomValidity(L),reportValidity:()=>v.reportValidity()})},[n._fields,t]),se=F.useMemo(()=>({name:t,value:_,...K(i)||h.disabled?{disabled:h.disabled||i}:{},onChange:I,onBlur:E,ref:M}),[t,i,h.disabled,I,E,M,_]);return F.useEffect(()=>{const v=n._options.shouldUnregister||l;n.register(t,{...x.current.rules,...K(x.current.disabled)?{disabled:x.current.disabled}:{}});const B=(L,T)=>{const G=y(n._fields,L);G&&G._f&&(G._f.mount=T)};if(B(t,!0),v){const L=N(y(n._options.defaultValues,t));D(n._defaultValues,t,L),O(y(n._formValues,t))&&D(n._formValues,t,L)}return!d&&n.register(t),()=>{(d?v&&!n._state.action:v)?n.unregister(t):B(t,!1)}},[t,n,d,l]),F.useEffect(()=>{n._setDisabledField({disabled:i,name:t})},[i,t,n]),F.useMemo(()=>({field:se,formState:h,fieldState:W}),[se,h,W])}const dr=e=>e.render(Pt(e));var gt=(e,s,t,i,n)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[i]:n||!0}}:{},ye=e=>Array.isArray(e)?e:[e],Ye=()=>{let e=[];return{get observers(){return e},next:n=>{for(const l of e)l.next&&l.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(l=>l!==n)}}),unsubscribe:()=>{e=[]}}},j=e=>R(e)&&!Object.keys(e).length,Le=e=>e.type==="file",J=e=>typeof e=="function",_e=e=>{if(!Ce)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},mt=e=>e.type==="select-multiple",Ne=e=>e.type==="radio",It=e=>Ne(e)||me(e),pe=e=>_e(e)&&e.isConnected;function qt(e,s){const t=s.slice(0,-1).length;let i=0;for(;i<t;)e=O(e)?i++:e[s[i++]];return e}function jt(e){for(const s in e)if(e.hasOwnProperty(s)&&!O(e[s]))return!1;return!0}function U(e,s){const t=Array.isArray(s)?s:Ae(s)?[s]:Re(s),i=t.length===1?e:qt(e,t),n=t.length-1,l=t[n];return i&&delete i[l],n!==0&&(R(i)&&j(i)||Array.isArray(i)&&jt(i))&&U(e,t.slice(0,-1)),e}var ht=e=>{for(const s in e)if(J(e[s]))return!0;return!1};function Fe(e,s={}){const t=Array.isArray(e);if(R(e)||t)for(const i in e)Array.isArray(e[i])||R(e[i])&&!ht(e[i])?(s[i]=Array.isArray(e[i])?[]:{},Fe(e[i],s[i])):q(e[i])||(s[i]=!0);return s}function vt(e,s,t){const i=Array.isArray(e);if(R(e)||i)for(const n in e)Array.isArray(e[n])||R(e[n])&&!ht(e[n])?O(s)||Te(t[n])?t[n]=Array.isArray(e[n])?Fe(e[n],[]):{...Fe(e[n])}:vt(e[n],q(s)?{}:s[n],t[n]):t[n]=!re(e[n],s[n]);return t}var ce=(e,s)=>vt(e,s,Fe(s));const Je={value:!1,isValid:!1},Qe={value:!0,isValid:!0};var bt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!O(e[0].attributes.value)?O(e[0].value)||e[0].value===""?Qe:{value:e[0].value,isValid:!0}:Qe:Je}return Je},Vt=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:i})=>O(e)?e:s?e===""?NaN:e&&+e:t&&Z(e)?new Date(e):i?i(e):e;const Xe={isValid:!1,value:null};var _t=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,Xe):Xe;function Ze(e){const s=e.ref;return Le(s)?s.files:Ne(s)?_t(e.refs).value:mt(s)?[...s.selectedOptions].map(({value:t})=>t):me(s)?bt(e.refs).value:Vt(O(s.value)?e.ref.value:s.value,e)}var Wt=(e,s,t,i)=>{const n={};for(const l of e){const u=y(s,l);u&&D(n,l,u._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:i}},xe=e=>e instanceof RegExp,fe=e=>O(e)?e:xe(e)?e.source:R(e)?xe(e.value)?e.value.source:e.value:e,et=e=>({isOnSubmit:!e||e===Y.onSubmit,isOnBlur:e===Y.onBlur,isOnChange:e===Y.onChange,isOnAll:e===Y.all,isOnTouch:e===Y.onTouched});const tt="AsyncFunction";var Ht=e=>!!e&&!!e.validate&&!!(J(e.validate)&&e.validate.constructor.name===tt||R(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===tt)),Kt=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),rt=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ge=(e,s,t,i)=>{for(const n of t||Object.keys(e)){const l=y(e,n);if(l){const{_f:u,...d}=l;if(u){if(u.refs&&u.refs[0]&&s(u.refs[0],n)&&!i)return!0;if(u.ref&&s(u.ref,u.name)&&!i)return!0;if(ge(d,s))break}else if(R(d)&&ge(d,s))break}}};function st(e,s,t){const i=y(e,t);if(i||Ae(t))return{error:i,name:t};const n=t.split(".");for(;n.length;){const l=n.join("."),u=y(s,l),d=y(e,l);if(u&&!Array.isArray(u)&&t!==l)return{name:t};if(d&&d.type)return{name:l,error:d};if(d&&d.root&&d.root.type)return{name:`${l}.root`,error:d.root};n.pop()}return{name:t}}var $t=(e,s,t,i)=>{t(e);const{name:n,...l}=e;return j(l)||Object.keys(l).length>=Object.keys(s).length||Object.keys(l).find(u=>s[u]===(!i||Y.all))},zt=(e,s,t)=>!e||!s||e===s||ye(e).some(i=>i&&(t?i===s:i.startsWith(s)||s.startsWith(i))),Gt=(e,s,t,i,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(s||e):(t?i.isOnBlur:n.isOnBlur)?!e:(t?i.isOnChange:n.isOnChange)?e:!0,Yt=(e,s)=>!Oe(y(e,s)).length&&U(e,s),Jt=(e,s,t)=>{const i=ye(y(e,t));return D(i,"root",s[t]),D(e,t,i),e},be=e=>Z(e);function it(e,s,t="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||K(e)&&!e)return{type:t,message:be(e)?e:"",ref:s}}var le=e=>R(e)&&!xe(e)?e:{value:e,message:""},at=async(e,s,t,i,n,l)=>{const{ref:u,refs:d,required:V,maxLength:_,minLength:h,min:x,max:b,pattern:W,validate:I,name:E,valueAsNumber:M,mount:se}=e._f,v=y(t,E);if(!se||s.has(E))return{};const B=d?d[0]:u,L=A=>{n&&B.reportValidity&&(B.setCustomValidity(K(A)?"":A||""),B.reportValidity())},T={},G=Ne(u),Q=me(u),oe=G||Q,H=(M||Le(u))&&O(u.value)&&O(v)||_e(u)&&u.value===""||v===""||Array.isArray(v)&&!v.length,ee=gt.bind(null,E,i,T),$=(A,w,p,C=te.maxLength,P=te.minLength)=>{const X=A?w:p;T[E]={type:A?C:P,message:X,ref:u,...ee(A?C:P,X)}};if(l?!Array.isArray(v)||!v.length:V&&(!oe&&(H||q(v))||K(v)&&!v||Q&&!bt(d).isValid||G&&!_t(d).isValid)){const{value:A,message:w}=be(V)?{value:!!V,message:V}:le(V);if(A&&(T[E]={type:te.required,message:w,ref:B,...ee(te.required,w)},!i))return L(w),T}if(!H&&(!q(x)||!q(b))){let A,w;const p=le(b),C=le(x);if(!q(v)&&!isNaN(v)){const P=u.valueAsNumber||v&&+v;q(p.value)||(A=P>p.value),q(C.value)||(w=P<C.value)}else{const P=u.valueAsDate||new Date(v),X=he=>new Date(new Date().toDateString()+" "+he),ue=u.type=="time",ne=u.type=="week";Z(p.value)&&v&&(A=ue?X(v)>X(p.value):ne?v>p.value:P>new Date(p.value)),Z(C.value)&&v&&(w=ue?X(v)<X(C.value):ne?v<C.value:P<new Date(C.value))}if((A||w)&&($(!!A,p.message,C.message,te.max,te.min),!i))return L(T[E].message),T}if((_||h)&&!H&&(Z(v)||l&&Array.isArray(v))){const A=le(_),w=le(h),p=!q(A.value)&&v.length>+A.value,C=!q(w.value)&&v.length<+w.value;if((p||C)&&($(p,A.message,w.message),!i))return L(T[E].message),T}if(W&&!H&&Z(v)){const{value:A,message:w}=le(W);if(xe(A)&&!v.match(A)&&(T[E]={type:te.pattern,message:w,ref:u,...ee(te.pattern,w)},!i))return L(w),T}if(I){if(J(I)){const A=await I(v,t),w=it(A,B);if(w&&(T[E]={...w,...ee(te.validate,w.message)},!i))return L(w.message),T}else if(R(I)){let A={};for(const w in I){if(!j(A)&&!i)break;const p=it(await I[w](v,t),B,w);p&&(A={...p,...ee(w,p.message)},L(p.message),i&&(T[E]=A))}if(!j(A)&&(T[E]={ref:B,...A},!i))return T}}return L(!0),T};const Qt={mode:Y.onSubmit,reValidateMode:Y.onChange,shouldFocusError:!0};function Xt(e={}){let s={...Qt,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:J(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},n=R(s.defaultValues)||R(s.values)?N(s.defaultValues||s.values)||{}:{},l=s.shouldUnregister?{}:N(n),u={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},V,_=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...h};const b={array:Ye(),state:Ye()},W=s.criteriaMode===Y.all,I=r=>a=>{clearTimeout(_),_=setTimeout(r,a)},E=async r=>{if(!s.disabled&&(h.isValid||x.isValid||r)){const a=s.resolver?j((await Q()).errors):await H(i,!0);a!==t.isValid&&b.state.next({isValid:a})}},M=(r,a)=>{!s.disabled&&(h.isValidating||h.validatingFields||x.isValidating||x.validatingFields)&&((r||Array.from(d.mount)).forEach(o=>{o&&(a?D(t.validatingFields,o,a):U(t.validatingFields,o))}),b.state.next({validatingFields:t.validatingFields,isValidating:!j(t.validatingFields)}))},se=(r,a=[],o,g,f=!0,c=!0)=>{if(g&&o&&!s.disabled){if(u.action=!0,c&&Array.isArray(y(i,r))){const m=o(y(i,r),g.argA,g.argB);f&&D(i,r,m)}if(c&&Array.isArray(y(t.errors,r))){const m=o(y(t.errors,r),g.argA,g.argB);f&&D(t.errors,r,m),Yt(t.errors,r)}if((h.touchedFields||x.touchedFields)&&c&&Array.isArray(y(t.touchedFields,r))){const m=o(y(t.touchedFields,r),g.argA,g.argB);f&&D(t.touchedFields,r,m)}(h.dirtyFields||x.dirtyFields)&&(t.dirtyFields=ce(n,l)),b.state.next({name:r,isDirty:$(r,a),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else D(l,r,a)},v=(r,a)=>{D(t.errors,r,a),b.state.next({errors:t.errors})},B=r=>{t.errors=r,b.state.next({errors:t.errors,isValid:!1})},L=(r,a,o,g)=>{const f=y(i,r);if(f){const c=y(l,r,O(o)?y(n,r):o);O(c)||g&&g.defaultChecked||a?D(l,r,a?c:Ze(f._f)):p(r,c),u.mount&&E()}},T=(r,a,o,g,f)=>{let c=!1,m=!1;const S={name:r};if(!s.disabled){if(!o||g){(h.isDirty||x.isDirty)&&(m=t.isDirty,t.isDirty=S.isDirty=$(),c=m!==S.isDirty);const k=re(y(n,r),a);m=!!y(t.dirtyFields,r),k?U(t.dirtyFields,r):D(t.dirtyFields,r,!0),S.dirtyFields=t.dirtyFields,c=c||(h.dirtyFields||x.dirtyFields)&&m!==!k}if(o){const k=y(t.touchedFields,r);k||(D(t.touchedFields,r,o),S.touchedFields=t.touchedFields,c=c||(h.touchedFields||x.touchedFields)&&k!==o)}c&&f&&b.state.next(S)}return c?S:{}},G=(r,a,o,g)=>{const f=y(t.errors,r),c=(h.isValid||x.isValid)&&K(a)&&t.isValid!==a;if(s.delayError&&o?(V=I(()=>v(r,o)),V(s.delayError)):(clearTimeout(_),V=null,o?D(t.errors,r,o):U(t.errors,r)),(o?!re(f,o):f)||!j(g)||c){const m={...g,...c&&K(a)?{isValid:a}:{},errors:t.errors,name:r};t={...t,...m},b.state.next(m)}},Q=async r=>{M(r,!0);const a=await s.resolver(l,s.context,Wt(r||d.mount,i,s.criteriaMode,s.shouldUseNativeValidation));return M(r),a},oe=async r=>{const{errors:a}=await Q(r);if(r)for(const o of r){const g=y(a,o);g?D(t.errors,o,g):U(t.errors,o)}else t.errors=a;return a},H=async(r,a,o={valid:!0})=>{for(const g in r){const f=r[g];if(f){const{_f:c,...m}=f;if(c){const S=d.array.has(c.name),k=f._f&&Ht(f._f);k&&h.validatingFields&&M([g],!0);const z=await at(f,d.disabled,l,W,s.shouldUseNativeValidation&&!a,S);if(k&&h.validatingFields&&M([g]),z[c.name]&&(o.valid=!1,a))break;!a&&(y(z,c.name)?S?Jt(t.errors,z,c.name):D(t.errors,c.name,z[c.name]):U(t.errors,c.name))}!j(m)&&await H(m,a,o)}}return o.valid},ee=()=>{for(const r of d.unMount){const a=y(i,r);a&&(a._f.refs?a._f.refs.every(o=>!pe(o)):!pe(a._f.ref))&&we(r)}d.unMount=new Set},$=(r,a)=>!s.disabled&&(r&&a&&D(l,r,a),!re(he(),n)),A=(r,a,o)=>yt(r,d,{...u.mount?l:O(a)?n:Z(r)?{[r]:a}:a},o,a),w=r=>Oe(y(u.mount?l:n,r,s.shouldUnregister?y(n,r,[]):[])),p=(r,a,o={})=>{const g=y(i,r);let f=a;if(g){const c=g._f;c&&(!c.disabled&&D(l,r,Vt(a,c)),f=_e(c.ref)&&q(a)?"":a,mt(c.ref)?[...c.ref.options].forEach(m=>m.selected=f.includes(m.value)):c.refs?me(c.ref)?c.refs.forEach(m=>{(!m.defaultChecked||!m.disabled)&&(Array.isArray(f)?m.checked=!!f.find(S=>S===m.value):m.checked=f===m.value||!!f)}):c.refs.forEach(m=>m.checked=m.value===f):Le(c.ref)?c.ref.value="":(c.ref.value=f,c.ref.type||b.state.next({name:r,values:N(l)})))}(o.shouldDirty||o.shouldTouch)&&T(r,f,o.shouldTouch,o.shouldDirty,!0),o.shouldValidate&&ne(r)},C=(r,a,o)=>{for(const g in a){if(!a.hasOwnProperty(g))return;const f=a[g],c=r+"."+g,m=y(i,c);(d.array.has(r)||R(f)||m&&!m._f)&&!ae(f)?C(c,f,o):p(c,f,o)}},P=(r,a,o={})=>{const g=y(i,r),f=d.array.has(r),c=N(a);D(l,r,c),f?(b.array.next({name:r,values:N(l)}),(h.isDirty||h.dirtyFields||x.isDirty||x.dirtyFields)&&o.shouldDirty&&b.state.next({name:r,dirtyFields:ce(n,l),isDirty:$(r,c)})):g&&!g._f&&!q(c)?C(r,c,o):p(r,c,o),rt(r,d)&&b.state.next({...t,name:r}),b.state.next({name:u.mount?r:void 0,values:N(l)})},X=async r=>{u.mount=!0;const a=r.target;let o=a.name,g=!0;const f=y(i,o),c=k=>{g=Number.isNaN(k)||ae(k)&&isNaN(k.getTime())||re(k,y(l,o,k))},m=et(s.mode),S=et(s.reValidateMode);if(f){let k,z;const ve=a.type?Ze(f._f):ut(r),ie=r.type===Ve.BLUR||r.type===Ve.FOCUS_OUT,pt=!Kt(f._f)&&!s.resolver&&!y(t.errors,o)&&!f._f.deps||Gt(ie,y(t.touchedFields,o),t.isSubmitted,S,m),Ee=rt(o,d,ie);D(l,o,ve),ie?(!a||!a.readOnly)&&(f._f.onBlur&&f._f.onBlur(r),V&&V(0)):f._f.onChange&&f._f.onChange(r);const ke=T(o,ve,ie),Tt=!j(ke)||Ee;if(!ie&&b.state.next({name:o,type:r.type,values:N(l)}),pt)return(h.isValid||x.isValid)&&(s.mode==="onBlur"?ie&&E():ie||E()),Tt&&b.state.next({name:o,...Ee?{}:ke});if(!ie&&Ee&&b.state.next({...t}),s.resolver){const{errors:$e}=await Q([o]);if(c(ve),g){const Ct=st(t.errors,i,o),ze=st($e,i,Ct.name||o);k=ze.error,o=ze.name,z=j($e)}}else M([o],!0),k=(await at(f,d.disabled,l,W,s.shouldUseNativeValidation))[o],M([o]),c(ve),g&&(k?z=!1:(h.isValid||x.isValid)&&(z=await H(i,!0)));g&&(f._f.deps&&ne(f._f.deps),G(o,z,k,ke))}},ue=(r,a)=>{if(y(t.errors,a)&&r.focus)return r.focus(),1},ne=async(r,a={})=>{let o,g;const f=ye(r);if(s.resolver){const c=await oe(O(r)?r:f);o=j(c),g=r?!f.some(m=>y(c,m)):o}else r?(g=(await Promise.all(f.map(async c=>{const m=y(i,c);return await H(m&&m._f?{[c]:m}:m)}))).every(Boolean),!(!g&&!t.isValid)&&E()):g=o=await H(i);return b.state.next({...!Z(r)||(h.isValid||x.isValid)&&o!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:o}:{},errors:t.errors}),a.shouldFocus&&!g&&ge(i,ue,r?f:d.mount),g},he=r=>{const a={...u.mount?l:n};return O(r)?a:Z(r)?y(a,r):r.map(o=>y(a,o))},Be=(r,a)=>({invalid:!!y((a||t).errors,r),isDirty:!!y((a||t).dirtyFields,r),error:y((a||t).errors,r),isValidating:!!y(t.validatingFields,r),isTouched:!!y((a||t).touchedFields,r)}),xt=r=>{r&&ye(r).forEach(a=>U(t.errors,a)),b.state.next({errors:r?t.errors:{}})},Pe=(r,a,o)=>{const g=(y(i,r,{_f:{}})._f||{}).ref,f=y(t.errors,r)||{},{ref:c,message:m,type:S,...k}=f;D(t.errors,r,{...k,...a,ref:g}),b.state.next({name:r,errors:t.errors,isValid:!1}),o&&o.shouldFocus&&g&&g.focus&&g.focus()},At=(r,a)=>J(r)?b.state.subscribe({next:o=>"values"in o&&r(A(void 0,a),o)}):A(r,a,!0),Ie=r=>b.state.subscribe({next:a=>{zt(r.name,a.name,r.exact)&&$t(a,r.formState||h,kt,r.reRenderRoot)&&r.callback({values:{...l},...t,...a,defaultValues:n})}}).unsubscribe,wt=r=>(u.mount=!0,x={...x,...r.formState},Ie({...r,formState:x})),we=(r,a={})=>{for(const o of r?ye(r):d.mount)d.mount.delete(o),d.array.delete(o),a.keepValue||(U(i,o),U(l,o)),!a.keepError&&U(t.errors,o),!a.keepDirty&&U(t.dirtyFields,o),!a.keepTouched&&U(t.touchedFields,o),!a.keepIsValidating&&U(t.validatingFields,o),!s.shouldUnregister&&!a.keepDefaultValue&&U(n,o);b.state.next({values:N(l)}),b.state.next({...t,...a.keepDirty?{isDirty:$()}:{}}),!a.keepIsValid&&E()},qe=({disabled:r,name:a})=>{(K(r)&&u.mount||r||d.disabled.has(a))&&(r?d.disabled.add(a):d.disabled.delete(a))},Se=(r,a={})=>{let o=y(i,r);const g=K(a.disabled)||K(s.disabled);return D(i,r,{...o||{},_f:{...o&&o._f?o._f:{ref:{name:r}},name:r,mount:!0,...a}}),d.mount.add(r),o?qe({disabled:K(a.disabled)?a.disabled:s.disabled,name:r}):L(r,!0,a.value),{...g?{disabled:a.disabled||s.disabled}:{},...s.progressive?{required:!!a.required,min:fe(a.min),max:fe(a.max),minLength:fe(a.minLength),maxLength:fe(a.maxLength),pattern:fe(a.pattern)}:{},name:r,onChange:X,onBlur:X,ref:f=>{if(f){Se(r,a),o=y(i,r);const c=O(f.value)&&f.querySelectorAll&&f.querySelectorAll("input,select,textarea")[0]||f,m=It(c),S=o._f.refs||[];if(m?S.find(k=>k===c):c===o._f.ref)return;D(i,r,{_f:{...o._f,...m?{refs:[...S.filter(pe),c,...Array.isArray(y(n,r))?[{}]:[]],ref:{type:c.type,name:r}}:{ref:c}}}),L(r,!1,void 0,c)}else o=y(i,r,{}),o._f&&(o._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(dt(d.array,r)&&u.action)&&d.unMount.add(r)}}},De=()=>s.shouldFocusError&&ge(i,ue,d.mount),St=r=>{K(r)&&(b.state.next({disabled:r}),ge(i,(a,o)=>{const g=y(i,o);g&&(a.disabled=g._f.disabled||r,Array.isArray(g._f.refs)&&g._f.refs.forEach(f=>{f.disabled=g._f.disabled||r}))},0,!1))},je=(r,a)=>async o=>{let g;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let f=N(l);if(b.state.next({isSubmitting:!0}),s.resolver){const{errors:c,values:m}=await Q();t.errors=c,f=N(m)}else await H(i);if(d.disabled.size)for(const c of d.disabled)U(f,c);if(U(t.errors,"root"),j(t.errors)){b.state.next({errors:{}});try{await r(f,o)}catch(c){g=c}}else a&&await a({...t.errors},o),De(),setTimeout(De);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:j(t.errors)&&!g,submitCount:t.submitCount+1,errors:t.errors}),g)throw g},Dt=(r,a={})=>{y(i,r)&&(O(a.defaultValue)?P(r,N(y(n,r))):(P(r,a.defaultValue),D(n,r,N(a.defaultValue))),a.keepTouched||U(t.touchedFields,r),a.keepDirty||(U(t.dirtyFields,r),t.isDirty=a.defaultValue?$(r,N(y(n,r))):$()),a.keepError||(U(t.errors,r),h.isValid&&E()),b.state.next({...t}))},We=(r,a={})=>{const o=r?N(r):n,g=N(o),f=j(r),c=f?n:g;if(a.keepDefaultValues||(n=o),!a.keepValues){if(a.keepDirtyValues){const m=new Set([...d.mount,...Object.keys(ce(n,l))]);for(const S of Array.from(m))y(t.dirtyFields,S)?D(c,S,y(l,S)):P(S,y(c,S))}else{if(Ce&&O(r))for(const m of d.mount){const S=y(i,m);if(S&&S._f){const k=Array.isArray(S._f.refs)?S._f.refs[0]:S._f.ref;if(_e(k)){const z=k.closest("form");if(z){z.reset();break}}}}if(a.keepFieldsRef)for(const m of d.mount)P(m,y(c,m));else i={}}l=s.shouldUnregister?a.keepDefaultValues?N(n):{}:N(c),b.array.next({values:{...c}}),b.state.next({values:{...c}})}d={mount:a.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},u.mount=!h.isValid||!!a.keepIsValid||!!a.keepDirtyValues,u.watch=!!s.shouldUnregister,b.state.next({submitCount:a.keepSubmitCount?t.submitCount:0,isDirty:f?!1:a.keepDirty?t.isDirty:!!(a.keepDefaultValues&&!re(r,n)),isSubmitted:a.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:f?{}:a.keepDirtyValues?a.keepDefaultValues&&l?ce(n,l):t.dirtyFields:a.keepDefaultValues&&r?ce(n,r):a.keepDirty?t.dirtyFields:{},touchedFields:a.keepTouched?t.touchedFields:{},errors:a.keepErrors?t.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},He=(r,a)=>We(J(r)?r(l):r,a),Et=(r,a={})=>{const o=y(i,r),g=o&&o._f;if(g){const f=g.refs?g.refs[0]:g.ref;f.focus&&(f.focus(),a.shouldSelect&&J(f.select)&&f.select())}},kt=r=>{t={...t,...r}},Ke={control:{register:Se,unregister:we,getFieldState:Be,handleSubmit:je,setError:Pe,_subscribe:Ie,_runSchema:Q,_focusError:De,_getWatch:A,_getDirty:$,_setValid:E,_setFieldArray:se,_setDisabledField:qe,_setErrors:B,_getFieldArray:w,_reset:We,_resetDefaultValues:()=>J(s.defaultValues)&&s.defaultValues().then(r=>{He(r,s.resetOptions),b.state.next({isLoading:!1})}),_removeUnmounted:ee,_disableForm:St,_subjects:b,_proxyFormState:h,get _fields(){return i},get _formValues(){return l},get _state(){return u},set _state(r){u=r},get _defaultValues(){return n},get _names(){return d},set _names(r){d=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:wt,trigger:ne,register:Se,handleSubmit:je,watch:At,setValue:P,getValues:he,reset:He,resetField:Dt,clearErrors:xt,unregister:we,setError:Pe,setFocus:Et,getFieldState:Be};return{...Ke,formControl:Ke}}function Zt(e={}){const s=F.useRef(void 0),t=F.useRef(void 0),[i,n]=F.useState({isDirty:!1,isValidating:!1,isLoading:J(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:J(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:i},e.defaultValues&&!J(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:u,...d}=Xt(e);s.current={...d,formState:i}}const l=s.current.control;return l._options=e,Ue(()=>{const u=l._subscribe({formState:l._proxyFormState,callback:()=>n({...l._formState}),reRenderRoot:!0});return n(d=>({...d,isReady:!0})),l._formState.isReady=!0,u},[l]),F.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),F.useEffect(()=>{e.mode&&(l._options.mode=e.mode),e.reValidateMode&&(l._options.reValidateMode=e.reValidateMode)},[l,e.mode,e.reValidateMode]),F.useEffect(()=>{e.errors&&(l._setErrors(e.errors),l._focusError())},[l,e.errors]),F.useEffect(()=>{e.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,e.shouldUnregister]),F.useEffect(()=>{if(l._proxyFormState.isDirty){const u=l._getDirty();u!==i.isDirty&&l._subjects.state.next({isDirty:u})}},[l,i.isDirty]),F.useEffect(()=>{e.values&&!re(e.values,t.current)?(l._reset(e.values,{keepFieldsRef:!0,...l._options.resetOptions}),t.current=e.values,n(u=>({...u}))):l._resetDefaultValues()},[l,e.values]),F.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),s.current.formState=ft(i,l),s.current}const nt=(e,s,t)=>{if(e&&"reportValidity"in e){const i=y(t,s);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},Ft=(e,s)=>{for(const t in s.fields){const i=s.fields[t];i&&i.ref&&"reportValidity"in i.ref?nt(i.ref,t,e):i&&i.refs&&i.refs.forEach(n=>nt(n,t,e))}},er=(e,s)=>{s.shouldUseNativeValidation&&Ft(e,s);const t={};for(const i in e){const n=y(s.fields,i),l=Object.assign(e[i]||{},{ref:n&&n.ref});if(tr(s.names||Object.keys(e),i)){const u=Object.assign({},y(t,i));D(u,"root",l),D(t,i,u)}else D(t,i,l)}return t},tr=(e,s)=>{const t=lt(s);return e.some(i=>lt(i).match(`^${t}\\.\\d+`))};function lt(e){return e.replace(/\]|\[/g,"")}function rr(e,s,t){return t===void 0&&(t={}),function(i,n,l){try{return Promise.resolve((function(u,d){try{var V=(s!=null&&s.context,Promise.resolve(e[t.mode==="sync"?"validateSync":"validate"](i,Object.assign({abortEarly:!1},s,{context:n}))).then(function(_){return l.shouldUseNativeValidation&&Ft({},l),{values:t.raw?Object.assign({},i):_,errors:{}}}))}catch(_){return d(_)}return V&&V.then?V.then(void 0,d):V})(0,function(u){if(!u.inner)throw u;return{values:{},errors:er((d=u,V=!l.shouldUseNativeValidation&&l.criteriaMode==="all",(d.inner||[]).reduce(function(_,h){if(_[h.path]||(_[h.path]={message:h.message,type:h.type}),V){var x=_[h.path].types,b=x&&x[h.type];_[h.path]=gt(h.path,V,_,h.type,b?[].concat(b,h.message):h.message)}return _},{})),l)};var d,V}))}catch(u){return Promise.reject(u)}}}const sr=e=>{const{children:s,className:t="",shouldUnregister:i,shouldFocusError:n=!0,mode:l="onBlur",initialValues:u,validationScheme:d,buttonConfigs:V,formId:_,language:h,onSubmit:x}=e,{handleSubmit:b,register:W,setValue:I,control:E,formState:M,getValues:se,watch:v,reset:B,clearErrors:L,setError:T,trigger:G,getFieldState:Q,unregister:oe}=Zt({mode:l,resolver:rr(d),defaultValues:u,shouldFocusError:n,shouldUnregister:i}),{errors:H,isDirty:ee,isSubmitted:$,isSubmitting:A,dirtyFields:w}=M,p=C=>{x&&x(C,M,w)};return Ge.useEffect(()=>{if(M.isSubmitted){const C=Object.keys(M.errors);C.length>0&&G(C)}},[h]),de.jsx("form",{onSubmit:b(p),id:_,className:Ot("form-container",t),children:de.jsx(Rt.Provider,{value:{trigger:G,register:W,errors:H,control:E,setValue:I,getValues:se,watch:v,reset:B,isDirty:ee,isSubmitted:$,isSubmitting:A,clearErrors:L,setError:T,dirtyFields:w,getFieldState:Q,unregister:oe,onSubmit:()=>b(p)()},children:de.jsxs(de.Fragment,{children:[s,V&&de.jsx("div",{className:"form-container__buttons",children:V.map((C,P)=>Ge.createElement(Mt,{...C,key:P}))})]})})})};sr.__docgenInfo={description:"",methods:[],displayName:"FormContainer",props:{className:{required:!1,tsType:{name:"string"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(data: TFormData, formState: FormState<TFormData>, dirtyFields?: TDirtyFields) => void",signature:{arguments:[{type:{name:"TFormData"},name:"data"},{type:{name:"FormState",elements:[{name:"TFormData"}],raw:"FormState<TFormData>"},name:"formState"},{type:{name:"Partial",elements:[{name:"Readonly",elements:[{name:"signature",type:"object",raw:"{ [x: string]: unknown }",signature:{properties:[{key:{name:"string"},value:{name:"unknown",required:!0}}]}}],raw:"Readonly<{ [x: string]: unknown }>"}],raw:"Partial<Readonly<{ [x: string]: unknown }>>"},name:"dirtyFields"}],return:{name:"void"}}},description:""},children:{required:!1,tsType:{name:"ReactNode"},description:""},validationScheme:{required:!0,tsType:{name:"AnyObjectSchema"},description:""},initialValues:{required:!0,tsType:{name:"TFormData"},description:""},buttonConfigs:{required:!1,tsType:{name:"Array",elements:[{name:"TButtonPropTypes"}],raw:"TButtonPropTypes[]"},description:""},shouldUnregister:{required:!1,tsType:{name:"boolean"},description:""},shouldFocusError:{required:!1,tsType:{name:"boolean"},description:""},mode:{required:!1,tsType:{name:"ValidationMode"},description:""},reValidateMode:{required:!1,tsType:{name:"union",raw:"'onChange' | 'onSubmit' | 'onBlur' | undefined",elements:[{name:"literal",value:"'onChange'"},{name:"literal",value:"'onSubmit'"},{name:"literal",value:"'onBlur'"},{name:"undefined"}]},description:""},formId:{required:!1,tsType:{name:"string"},description:""},language:{required:!1,tsType:{name:"string"},description:""}}};export{dr as C,sr as F,y as g,Me as u};
